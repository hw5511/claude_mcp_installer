[33mcommit 46093fa2c6b7250a5712e3f9dfd5290b3e7665c6[m[33m ([m[1;36mHEAD[m[33m -> [m[1;32mmain[m[33m)[m
Author: WOOHEE <yangheewoo5511@gmail.com>
Date:   Tue Apr 8 00:00:07 2025 +0900

    Notion MCP ì˜¤ë¥˜ ìˆ˜ì • - íŒ¨í‚¤ì§€ ì˜ì¡´ì„± ë¬¸ì œ í•´ê²°

[1mdiff --git a/mcp_shop/notion_mcp/notion_mcp.js b/mcp_shop/notion_mcp/notion_mcp.js[m
[1mindex db0d441..e69de29 100644[m
[1m--- a/mcp_shop/notion_mcp/notion_mcp.js[m
[1m+++ b/mcp_shop/notion_mcp/notion_mcp.js[m
[36m@@ -1,828 +0,0 @@[m
[31m-#!/usr/bin/env node[m
[31m-[m
[31m-const { Client } = require('@notionhq/client');[m
[31m-const { NotionToMarkdown } = require('notion-to-md');[m
[31m-const { MCP } = require('@modelcontextprotocol/core');[m
[31m-const base64 = require('base64-js');[m
[31m-[m
[31m-// í™˜ê²½ ë³€ìˆ˜ì—ì„œ Notion API í† í° ê°€ì ¸ì˜¤ê¸°[m
[31m-const NOTION_API_TOKEN = process.env.NOTION_API_TOKEN;[m
[31m-const MARKDOWN_CONVERSION = process.env.NOTION_MARKDOWN_CONVERSION === 'true';[m
[31m-[m
[31m-// Notion í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”[m
[31m-let notion;[m
[31m-let n2m;[m
[31m-[m
[31m-// ì´ˆê¸°í™” í•¨ìˆ˜[m
[31m-function initializeClient() {[m
[31m-  if (!NOTION_API_TOKEN) {[m
[31m-    console.error('NOTION_API_TOKEN í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');[m
[31m-    return false;[m
[31m-  }[m
[31m-  [m
[31m-  try {[m
[31m-    notion = new Client({ auth: NOTION_API_TOKEN });[m
[31m-    n2m = new NotionToMarkdown({ notionClient: notion });[m
[31m-    return true;[m
[31m-  } catch (error) {[m
[31m-    console.error('Notion í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);[m
[31m-    return false;[m
[31m-  }[m
[31m-}[m
[31m-[m
[31m-// MCP ì„œë²„ ì´ˆê¸°í™”[m
[31m-const mcp = new MCP("notion");[m
[31m-console.info("Initializing server...");[m
[31m-[m
[31m-// ì‘ë‹µ í¬ë§·íŒ… í•¨ìˆ˜[m
[31m-async function formatResponse(data, format = 'json') {[m
[31m-  if (format === 'markdown' && MARKDOWN_CONVERSION && data) {[m
[31m-    try {[m
[31m-      if (Array.isArray(data)) {[m
[31m-        // ë°°ì—´ì¼ ê²½ìš° ê° í•­ëª©ì„ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€í™˜[m
[31m-        const markdownResults = [];[m
[31m-        for (const item of data) {[m
[31m-          if (item.object === 'page') {[m
[31m-            const mdBlocks = await n2m.pageToMarkdown(item.id);[m
[31m-            const mdString = n2m.toMarkdownString(mdBlocks);[m
[31m-            markdownResults.push({[m
[31m-              id: item.id,[m
[31m-              title: item.properties?.title?.title?.[0]?.text?.content || 'Untitled',[m
[31m-              content: mdString.parent[m
[31m-            });[m
[31m-          } else {[m
[31m-            markdownResults.push(item);[m
[31m-          }[m
[31m-        }[m
[31m-        return markdownResults;[m
[31m-      } else if (data.object === 'page') {[m
[31m-        // ë‹¨ì¼ í˜ì´ì§€ì¼ ê²½ìš°[m
[31m-        const mdBlocks = await n2m.pageToMarkdown(data.id);[m
[31m-        const mdString = n2m.toMarkdownString(mdBlocks);[m
[31m-        return {[m
[31m-          id: data.id,[m
[31m-          title: data.properties?.title?.title?.[0]?.text?.content || 'Untitled',[m
[31m-          content: mdString.parent[m
[31m-        };[m
[31m-      } else if (data.object === 'list' && data.results) {[m
[31m-        // ë¦¬ìŠ¤íŠ¸ ê²°ê³¼ì¼ ê²½ìš°[m
[31m-        const results = await Promise.all(data.results.map(async (item) => {[m
[31m-          if (item.object === 'page') {[m
[31m-            try {[m
[31m-              const mdBlocks = await n2m.pageToMarkdown(item.id);[m
[31m-              const mdString = n2m.toMarkdownString(mdBlocks);[m
[31m-              return {[m
[31m-                id: item.id,[m
[31m-                title: item.properties?.title?.title?.[0]?.text?.content || 'Untitled',[m
[31m-                content: mdString.parent,[m
[31m-                url: item.url[m
[31m-              };[m
[31m-            } catch (e) {[m
[31m-              return item;[m
[31m-            }[m
[31m-          }[m
[31m-          return item;[m
[31m-        }));[m
[31m-        [m
[31m-        return {[m
[31m-          ...data,[m
[31m-          results[m
[31m-        };[m
[31m-      }[m
[31m-    } catch (error) {[m
[31m-      console.error('ë§ˆí¬ë‹¤ìš´ ë³€í™˜ ì˜¤ë¥˜:', error);[m
[31m-    }[m
[31m-  }[m
[31m-  [m
[31m-  // ê¸°ë³¸ì ìœ¼ë¡œ JSON ë°˜í™˜[m
[31m-  return data;[m
[31m-}[m
[31m-[m
[31m-// MCP ë„êµ¬ ë“±ë¡ - í˜ì´ì§€ ìƒì„±[m
[31m-mcp.registerTool({[m
[31m-  name: 'notion_create_page',[m
[31m-  description: 'Notionì— ìƒˆ í˜ì´ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë¶€ëª¨ ID(í˜ì´ì§€ ë˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤)ì™€ ì†ì„±ì„ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.',[m
[31m-  parameters: {[m
[31m-    parent: {[m
[31m-      type: 'object',[m
[31m-      description: 'í˜ì´ì§€ê°€ ì†í•  ë¶€ëª¨. ë°ì´í„°ë² ì´ìŠ¤ ID ë˜ëŠ” í˜ì´ì§€ IDê°€ í•„ìš”í•©ë‹ˆë‹¤.',[m
[31m-      required: true[m
[31m-    },[m
[31m-    properties: {[m
[31m-      type: 'object',[m
[31m-      description: 'í˜ì´ì§€ ì†ì„±. ë¶€ëª¨ê°€ ë°ì´í„°ë² ì´ìŠ¤ì¸ ê²½ìš° í•„ìˆ˜ì…ë‹ˆë‹¤.',[m
[31m-      required: false[m
[31m-    },[m
[31m-    children: {[m
[31m-      type: 'array',[m
[31m-      description: 'í˜ì´ì§€ì— ì¶”ê°€í•  ë¸”ë¡ ëª©ë¡',[m
[31m-      required: false[m
[31m-    },[m
[31m-    icon: {[m
[31m-      type: 'object',[m
[31m-      description: 'í˜ì´ì§€ ì•„ì´ì½˜',[m
[31m-      required: false[m
[31m-    },[m
[31m-    cover: {[m
[31m-      type: 'object',[m
[31m-      description: 'í˜ì´ì§€ ì»¤ë²„ ì´ë¯¸ì§€',[m
[31m-      required: false[m
[31m-    },[m
[31m-    format: {[m
[31m-      type: 'string',[m
[31m-      description: 'ì‘ë‹µ í˜•ì‹ (json ë˜ëŠ” markdown)',[m
[31m-      required: false[m
[31m-    }[m
[31m-  },[m
[31m-  handler: async ({ parent, properties, children, icon, cover, format = 'json' }) => {[m
[31m-    if (!initializeClient()) return { error: 'Notion í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨' };[m
[31m-    [m
[31m-    try {[m
[31m-      const createPageParams = {[m
[31m-        parent: parent,[m
[31m-        properties: properties || {}[m
[31m-      };[m
[31m-      [m
[31m-      if (children) createPageParams.children = children;[m
[31m-      if (icon) createPageParams.icon = icon;[m
[31m-      if (cover) createPageParams.cover = cover;[m
[31m-      [m
[31m-      const response = await notion.pages.create(createPageParams);[m
[31m-      return formatResponse(response, format);[m
[31m-    } catch (error) {[m
[31m-      return { error: error.message };[m
[31m-    }[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-// í˜ì´ì§€ ë‚´ìš© ì €ì¥[m
[31m-mcp.registerTool({[m
[31m-  name: 'notion_update_page',[m
[31m-  description: 'ê¸°ì¡´ Notion í˜ì´ì§€ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤',[m
[31m-  parameters: {[m
[31m-    page_id: {[m
[31m-      type: 'string',[m
[31m-      description: 'ì—…ë°ì´íŠ¸í•  í˜ì´ì§€ì˜ ID',[m
[31m-      required: true[m
[31m-    },[m
[31m-    properties: {[m
[31m-      type: 'object',[m
[31m-      description: 'ì—…ë°ì´íŠ¸í•  í˜ì´ì§€ ì†ì„±',[m
[31m-      required: false[m
[31m-    },[m
[31m-    archived: {[m
[31m-      type: 'boolean',[m
[31m-      description: 'í˜ì´ì§€ë¥¼ ë³´ê´€í• ì§€ ì—¬ë¶€',[m
[31m-      required: false[m
[31m-    },[m
[31m-    icon: {[m
[31m-      type: 'object',[m
[31m-      description: 'í˜ì´ì§€ ì•„ì´ì½˜',[m
[31m-      required: false[m
[31m-    },[m
[31m-    cover: {[m
[31m-      type: 'object',[m
[31m-      description: 'í˜ì´ì§€ ì»¤ë²„ ì´ë¯¸ì§€',[m
[31m-      required: false[m
[31m-    },[m
[31m-    format: {[m
[31m-      type: 'string',[m
[31m-      description: 'ì‘ë‹µ í˜•ì‹ (json ë˜ëŠ” markdown)',[m
[31m-      required: false[m
[31m-    }[m
[31m-  },[m
[31m-  handler: async ({ page_id, properties, archived, icon, cover, format = 'json' }) => {[m
[31m-    if (!initializeClient()) return { error: 'Notion í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨' };[m
[31m-    [m
[31m-    try {[m
[31m-      const updateParams = {};[m
[31m-      if (properties) updateParams.properties = properties;[m
[31m-      if (archived !== undefined) updateParams.archived = archived;[m
[31m-      if (icon) updateParams.icon = icon;[m
[31m-      if (cover) updateParams.cover = cover;[m
[31m-      [m
[31m-      const response = await notion.pages.update({[m
[31m-        page_id: page_id,[m
[31m-        ...updateParams[m
[31m-      });[m
[31m-      [m
[31m-      return formatResponse(response, format);[m
[31m-    } catch (error) {[m
[31m-      return { error: error.message };[m
[31m-    }[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-// ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬[m
[31m-mcp.registerTool({[m
[31m-  name: 'notion_query_database',[m
[31m-  description: 'Notion ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì¿¼ë¦¬í•©ë‹ˆë‹¤',[m
[31m-  parameters: {[m
[31m-    database_id: {[m
[31m-      type: 'string',[m
[31m-      description: 'ì¿¼ë¦¬í•  ë°ì´í„°ë² ì´ìŠ¤ ID',[m
[31m-      required: true[m
[31m-    },[m
[31m-    filter: {[m
[31m-      type: 'object',[m
[31m-      description: 'í•„í„° ì¡°ê±´',[m
[31m-      required: false[m
[31m-    },[m
[31m-    sorts: {[m
[31m-      type: 'array',[m
[31m-      description: 'ì •ë ¬ ì¡°ê±´',[m
[31m-      required: false[m
[31m-    },[m
[31m-    start_cursor: {[m
[31m-      type: 'string',[m
[31m-      description: 'ë‹¤ìŒ í˜ì´ì§€ë¥¼ ìœ„í•œ ì»¤ì„œ',[m
[31m-      required: false[m
[31m-    },[m
[31m-    page_size: {[m
[31m-      type: 'number',[m
[31m-      description: 'ê²°ê³¼ í˜ì´ì§€ í¬ê¸° (ìµœëŒ€ 100)',[m
[31m-      required: false[m
[31m-    },[m
[31m-    format: {[m
[31m-      type: 'string',[m
[31m-      description: 'ì‘ë‹µ í˜•ì‹ (json ë˜ëŠ” markdown)',[m
[31m-      required: false[m
[31m-    }[m
[31m-  },[m
[31m-  handler: async ({ database_id, filter, sorts, start_cursor, page_size, format = 'json' }) => {[m
[31m-    if (!initializeClient()) return { error: 'Notion í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨' };[m
[31m-    [m
[31m-    try {[m
[31m-      const queryParams = {[m
[31m-        database_id: database_id[m
[31m-      };[m
[31m-      [m
[31m-      if (filter) queryParams.filter = filter;[m
[31m-      if (sorts) queryParams.sorts = sorts;[m
[31m-      if (start_cursor) queryParams.start_cursor = start_cursor;[m
[31m-      if (page_size) queryParams.page_size = page_size;[m
[31m-      [m
[31m-      const response = await notion.databases.query(queryParams);[m
[31m-      return formatResponse(response, format);[m
[31m-    } catch (error) {[m
[31m-      return { error: error.message };[m
[31m-    }[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-// í˜ì´ì§€ ì •ë³´ ê°€ì ¸ì˜¤ê¸°[m
[31m-mcp.registerTool({[m
[31m-  name: 'notion_retrieve_page',[m
[31m-  description: 'Notion í˜ì´ì§€ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤',[m
[31m-  parameters: {[m
[31m-    page_id: {[m
[31m-      type: 'string',[m
[31m-      description: 'ê°€ì ¸ì˜¬ í˜ì´ì§€ ID',[m
[31m-      required: true[m
[31m-    },[m
[31m-    format: {[m
[31m-      type: 'string',[m
[31m-      description: 'ì‘ë‹µ í˜•ì‹ (json ë˜ëŠ” markdown)',[m
[31m-      required: false[m
[31m-    }[m
[31m-  },[m
[31m-  handler: async ({ page_id, format = 'json' }) => {[m
[31m-    if (!initializeClient()) return { error: 'Notion í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨' };[m
[31m-    [m
[31m-    try {[m
[31m-      const response = await notion.pages.retrieve({ page_id });[m
[31m-      return formatResponse(response, format);[m
[31m-    } catch (error) {[m
[31m-      return { error: error.message };[m
[31m-    }[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-// í˜ì´ì§€ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°[m
[31m-mcp.registerTool({[m
[31m-  name: 'notion_get_page_content',[m
[31m-  description: 'Notion í˜ì´ì§€ì˜ ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤',[m
[31m-  parameters: {[m
[31m-    page_id: {[m
[31m-      type: 'string',[m
[31m-      description: 'ë‚´ìš©ì„ ê°€ì ¸ì˜¬ í˜ì´ì§€ ID',[m
[31m-      required: true[m
[31m-    },[m
[31m-    format: {[m
[31m-      type: 'string',[m
[31m-      description: 'ì‘ë‹µ í˜•ì‹ (json ë˜ëŠ” markdown)',[m
[31m-      required: false[m
[31m-    }[m
[31m-  },[m
[31m-  handler: async ({ page_id, format = 'markdown' }) => {[m
[31m-    if (!initializeClient()) return { error: 'Notion í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨' };[m
[31m-    [m
[31m-    try {[m
[31m-      // í˜ì´ì§€ ì •ë³´ ê°€ì ¸ì˜¤ê¸°[m
[31m-      const pageInfo = await notion.pages.retrieve({ page_id });[m
[31m-      [m
[31m-      // í˜ì´ì§€ ë¸”ë¡ ê°€ì ¸ì˜¤ê¸°[m
[31m-      const blocks = await n2m.pageToMarkdown(page_id);[m
[31m-      const mdString = n2m.toMarkdownString(blocks);[m
[31m-      [m
[31m-      // í˜ì´ì§€ ì œëª© ì¶”ì¶œ[m
[31m-      let title = 'Untitled';[m
[31m-      if (pageInfo.properties) {[m
[31m-        const titleProp = Object.values(pageInfo.properties).find([m
[31m-          prop => prop.type === 'title'[m
[31m-        );[m
[31m-        if (titleProp && titleProp.title && titleProp.title.length > 0) {[m
[31m-          title = titleProp.title.map(t => t.plain_text).join('');[m
[31m-        }[m
[31m-      }[m
[31m-      [m
[31m-      if (format === 'markdown') {[m
[31m-        return {[m
[31m-          id: page_id,[m
[31m-          title: title,[m
[31m-          content: mdString.parent,[m
[31m-          url: pageInfo.url[m
[31m-        };[m
[31m-      } else {[m
[31m-        return {[m
[31m-          id: page_id,[m
[31m-          title: title,[m
[31m-          blocks: blocks,[m
[31m-          info: pageInfo,[m
[31m-          url: pageInfo.url[m
[31m-        };[m
[31m-      }[m
[31m-    } catch (error) {[m
[31m-      return { error: error.message };[m
[31m-    }[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-// ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±[m
[31m-mcp.registerTool({[m
[31m-  name: 'notion_create_database',[m
[31m-  description: 'Notionì— ìƒˆ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤',[m
[31m-  parameters: {[m
[31m-    parent: {[m
[31m-      type: 'object',[m
[31m-      description: 'ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•  ë¶€ëª¨ í˜ì´ì§€',[m
[31m-      required: true[m
[31m-    },[m
[31m-    title: {[m
[31m-      type: 'array',[m
[31m-      description: 'ë°ì´í„°ë² ì´ìŠ¤ ì œëª©',[m
[31m-      required: false[m
[31m-    },[m
[31m-    properties: {[m
[31m-      type: 'object',[m
[31m-      description: 'ë°ì´í„°ë² ì´ìŠ¤ ì†ì„± ìŠ¤í‚¤ë§ˆ',[m
[31m-      required: true[m
[31m-    },[m
[31m-    format: {[m
[31m-      type: 'string',[m
[31m-      description: 'ì‘ë‹µ í˜•ì‹ (json ë˜ëŠ” markdown)',[m
[31m-      required: false[m
[31m-    }[m
[31m-  },[m
[31m-  handler: async ({ parent, title, properties, format = 'json' }) => {[m
[31m-    if (!initializeClient()) return { error: 'Notion í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨' };[m
[31m-    [m
[31m-    try {[m
[31m-      const createParams = {[m
[31m-        parent: parent,[m
[31m-        properties: properties[m
[31m-      };[m
[31m-      [m
[31m-      if (title) createParams.title = title;[m
[31m-      [m
[31m-      const response = await notion.databases.create(createParams);[m
[31m-      return formatResponse(response, format);[m
[31m-    } catch (error) {[m
[31m-      return { error: error.message };[m
[31m-    }[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-// ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´ ê°€ì ¸ì˜¤ê¸°[m
[31m-mcp.registerTool({[m
[31m-  name: 'notion_retrieve_database',[m
[31m-  description: 'Notion ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤',[m
[31m-  parameters: {[m
[31m-    database_id: {[m
[31m-      type: 'string',[m
[31m-      description: 'ê°€ì ¸ì˜¬ ë°ì´í„°ë² ì´ìŠ¤ ID',[m
[31m-      required: true[m
[31m-    },[m
[31m-    format: {[m
[31m-      type: 'string',[m
[31m-      description: 'ì‘ë‹µ í˜•ì‹ (json ë˜ëŠ” markdown)',[m
[31m-      required: false[m
[31m-    }[m
[31m-  },[m
[31m-  handler: async ({ database_id, format = 'json' }) => {[m
[31m-    if (!initializeClient()) return { error: 'Notion í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨' };[m
[31m-    [m
[31m-    try {[m
[31m-      const response = await notion.databases.retrieve({ database_id });[m
[31m-      return formatResponse(response, format);[m
[31m-    } catch (error) {[m
[31m-      return { error: error.message };[m
[31m-    }[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-// ë¸”ë¡ ì •ë³´ ê°€ì ¸ì˜¤ê¸°[m
[31m-mcp.registerTool({[m
[31m-  name: 'notion_retrieve_block',[m
[31m-  description: 'íŠ¹ì • Notion ë¸”ë¡ì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤',[m
[31m-  parameters: {[m
[31m-    block_id: {[m
[31m-      type: 'string',[m
[31m-      description: 'ê°€ì ¸ì˜¬ ë¸”ë¡ ID',[m
[31m-      required: true[m
[31m-    },[m
[31m-    format: {[m
[31m-      type: 'string',[m
[31m-      description: 'ì‘ë‹µ í˜•ì‹ (json ë˜ëŠ” markdown)',[m
[31m-      required: false[m
[31m-    }[m
[31m-  },[m
[31m-  handler: async ({ block_id, format = 'json' }) => {[m
[31m-    if (!initializeClient()) return { error: 'Notion í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨' };[m
[31m-    [m
[31m-    try {[m
[31m-      const response = await notion.blocks.retrieve({ block_id });[m
[31m-      return formatResponse(response, format);[m
[31m-    } catch (error) {[m
[31m-      return { error: error.message };[m
[31m-    }[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-// ë¸”ë¡ ìì‹ ê°€ì ¸ì˜¤ê¸°[m
[31m-mcp.registerTool({[m
[31m-  name: 'notion_retrieve_block_children',[m
[31m-  description: 'íŠ¹ì • Notion ë¸”ë¡ì˜ ìì‹ ë¸”ë¡ë“¤ì„ ê°€ì ¸ì˜µë‹ˆë‹¤',[m
[31m-  parameters: {[m
[31m-    block_id: {[m
[31m-      type: 'string',[m
[31m-      description: 'ë¶€ëª¨ ë¸”ë¡ ID',[m
[31m-      required: true[m
[31m-    },[m
[31m-    start_cursor: {[m
[31m-      type: 'string',[m
[31m-      description: 'ë‹¤ìŒ í˜ì´ì§€ë¥¼ ìœ„í•œ ì»¤ì„œ',[m
[31m-      required: false[m
[31m-    },[m
[31m-    page_size: {[m
[31m-      type: 'number',[m
[31m-      description: 'ê²°ê³¼ í˜ì´ì§€ í¬ê¸° (ìµœëŒ€ 100)',[m
[31m-      required: false[m
[31m-    },[m
[31m-    format: {[m
[31m-      type: 'string',[m
[31m-      description: 'ì‘ë‹µ í˜•ì‹ (json ë˜ëŠ” markdown)',[m
[31m-      required: false[m
[31m-    }[m
[31m-  },[m
[31m-  handler: async ({ block_id, start_cursor, page_size, format = 'json' }) => {[m
[31m-    if (!initializeClient()) return { error: 'Notion í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨' };[m
[31m-    [m
[31m-    try {[m
[31m-      const params = { block_id };[m
[31m-      if (start_cursor) params.start_cursor = start_cursor;[m
[31m-      if (page_size) params.page_size = page_size;[m
[31m-      [m
[31m-      const response = await notion.blocks.children.list(params);[m
[31m-      return formatResponse(response, format);[m
[31m-    } catch (error) {[m
[31m-      return { error: error.message };[m
[31m-    }[m
[31m-  }[m
[31m-});[m
[31m-[m
[31m-// ë¸”ë¡ ì¶”ê°€[m
[31m-mcp.registerTool({[m
[31m-  name: 'notion_append_block_children',[m
[31m-  description: 'ë¶€ëª¨ ë¸”ë¡ì— ìì‹ ë¸”ë¡ì„ ì¶”ê°€í•©ë‹ˆë‹¤',[m
[31m-  parameters: {[m
[31m-    block_id: {[m
[31m-      type: 'string',[m
[31m-      description: 'ë¶€ëª¨ ë¸”ë¡ ID',[m
[31m-      required: true[m
[31m-    },[m
[31m-    children: {[m
[31m-      type: 'array',[m
[31m-      description: 'ì¶”ê°€í•  ë¸”ë¡ ê°ì²´ ë°°ì—´',[m
[31m-      required: true[m
[31m-    },[m
[31m-    format: {[m
[31m-      type: 'string',[m
[31m-      description: 'ì‘ë‹µ í˜•ì‹ (json ë˜ëŠ” markdown)',[m
[31m-      required: false[m
[31m-    }[m
[31m-  },[m
[31m-  handler: async ({ block_id, children, format = 'json' }) => {[m
[31m-    if (!initializeClient()) return { error: 'Notion í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨' };[m
[31m-    [m
[31m-    try {[m
[31m-      const response = await notion.blocks.children.append({[m
[31m-        block_id,[m
[31m-        children[m
[31m-      });[m
[31m-      [m
[31m-      return formatResponse(response, format);[m
[31m-    } catch (error) {[m
[31m-      return { error: error.